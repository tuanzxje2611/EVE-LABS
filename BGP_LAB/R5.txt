en
conf t
hostname R5
line console 0
exec-timeout 0 0
no ip domain lookup

int loopback 0
ip address 5.5.5.5 255.255.255.255
int e0/0
ip address 192.168.35.5 255.255.255.0
no shutdown
int e0/1
ip address 192.168.45.5 255.255.255.0
no shutdown
int e0/2
ip address 192.168.57.5 255.255.255.0
no shutdown
int e0/3
ip address 192.168.58.5 255.255.255.0 
no shutdown


!********* OSPF *******
router ospf 1
 network 5.5.5.5 0.0.0.0 area 0
 network 192.168.45.0 0.0.0.255 area 0
 network 192.168.57.0 0.0.0.255 area 0

ip route 192.168.89.9 255.255.255.255 192.168.58.8

!********* GRE Tunnel *******
int Tunnel 0
 tunnel source 192.168.58.5
 tunnel destination 192.168.89.9
 ip address 192.168.59.5 255.255.255.0

!*** we also need to create static route that R5 and R9 can reach the other's loopback
ip route 9.9.9.9 255.255.255.255 192.168.59.9

!********* BGP *******
router bgp 45
 bgp confederation identifier 4567
 bgp confederation peer 67
 neighbor 4.4.4.4 remote-as 45
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 7.7.7.7 remote-as 67
 neighbor 7.7.7.7 update-source Loopback0
 neighbor 7.7.7.7 ebgp-multihop 2


!********* eBGP *******
router bgp 45
 neighbor 192.168.35.3 remote-as 23

 neighbor 9.9.9.9 remote-as 65505.9
 neighbor 9.9.9.9 update-source Loopback0
 neighbor 9.9.9.9 ebgp-multihop 2


!********* advertise the IPv4 addresses of the loopback interfaces *******
router bgp 45
network 5.5.5.5 mask 255.255.255.255


!********* Next-hop-self for AS4567 *******
router bgp 45
 neighbor 4.4.4.4 next-hop-self
 neighbor 7.7.7.7 next-hop-self





 



